# Standardport för ActiveMQ-broker.
# Läser konfiguration från miljövariabler
spring.activemq.broker-url=${BROKER_URL:tcp://activemq:61616}
spring.activemq.user=${BROKER_USER}
spring.activemq.password=${BROKER_PASS}

# Anger om pub-sub (Topic) eller point-to-point (Queue) används. false = Queue.
spring.jms.pub-sub-domain=false

# Stänger av "Open Session in View". Hindrar JPA-frågor i webblagret (kräver transaktion i service/consumer).
spring.jpa.open-in-view=false

# PostgreSQL istället för H2
spring.datasource.url=jdbc:postgresql://${DB_HOST:postgres}:${DB_PORT:5432}/${DB_NAME:integrationdb}
spring.datasource.username=${DB_USER:integration}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.datasource.hikari.connection-init-sql=SET TIME ZONE 'UTC'
spring.jpa.properties.hibernate.jdbc_time_zone=UTC
spring.jackson.time-zone=UTC

## Actuator-säkerhet
# Exponera endast ofarliga endpoints externt.
# Stäng av /actuator/env (kan läcka miljövariabler).
# Visa aldrig konfigurationsvärden i /actuator/configprops.
management.endpoints.web.exposure.include=health,info
management.endpoint.env.enabled=false
management.endpoint.configprops.show-values=never
management.endpoint.health.show-details=always

# Exponera "info.*" i /actuator/info (krävs i Spring Boot 3.x)
management.info.env.enabled=true

# Konfigurerar JPA att automatiskt uppdatera databasschemat vid uppstart
spring.jpa.hibernate.ddl-auto=update

# Kö-namn (kan ändras per miljö). Default: 'test-queue'
app.queue.name=test-queue

# Visa valt kö-namn i /actuator/info
info.queue.name=${app.queue.name}
