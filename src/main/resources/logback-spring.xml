<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="30 seconds">

    <!-- Loggar till konsolen i Logstash/JSON-format -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <timeZone>UTC</timeZone>
        </encoder>
    </appender>

    <!-- Loggar till en fil som roteras dagligen -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/app.log</file>

        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">

            <!-- Skapar en ny loggfil varje dag (UTC) -->
            <fileNamePattern>logs/app.%d{yyyy-MM-dd, UTC}.log</fileNamePattern>

            <!-- Behåller loggfiler i upp till 7 dagar -->
            <maxHistory>7</maxHistory>
        </rollingPolicy>

        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <!-- Tidszon för tidsstämplar i loggar -->
            <timeZone>UTC</timeZone>
        </encoder>
    </appender>

    <!-- Standardloggnivå och aktiva appenders -->
    <root level="INFO">
        <appender-ref ref="CONSOLE" />
        <appender-ref ref="FILE" />
    </root>
</configuration>
